# ドコモ AIエージェント・Expert Agent Developer Kit を利用したAndroidアプリケーション

## 概要
株式会社NTTドコモが公開されている[AIエージェント基盤](https://dev.smt.docomo.ne.jp/?p=common_page&p_name=sebastien_teaser)を活用したAndroidアプリケーションです。

[株式会社アットウェア](http://www.atware.co.jp)は[AIエージェント基盤の開発パートナー](http://tech.atware.co.jp/ai-agent/)として、独自のAIサービスの開発およびAIサービスを提供される企業様に対して開発のご支援等をしてまいります。それに向けた取り組みの一貫で、AIエージェント上のサービスを活用するクライアント（デバイス）のサンプルとしてAndroidアプリケーションを開発しました。AIエージェント基盤を活用するためのExpert Agent Developer Kitの利用方法や活用法を検証することを目的にしていますので、アプリケーションとしてのデザイン、使い勝手は重要視していません。また、品質についても最低限の動作がするレベルのものです。


## アプリ一覧
1. trial_app トライアルアプリ

## ビルドの前提条件
1. Java8がインストールされている事
2. 環境変数"JAVA_HOME"にJava8のインストールディレクトリが設定されている事
3. Android SDKに"platforms;android-25"がインストールされている事
4. Android SDKに"build-tools;25.0.2"がインストールされている事
5. 環境変数"ANDROID_HOME"にAndroid SDKのイントールディレクトリが設定されている事

## APKのインストール方法
本アプリではWebViewを使用しています。
Android 6.0/6.0.1(Mashmallow)のWebViewにはOpenGL関連の不具合があり、アプリが不意にクラッシュする可能性があります。
該当する端末をお使いの場合はPlayストアから「AndroidシステムのWebView」を更新する事をお勧めいたします。

各アプリのプロジェクト直下で以下のコマンドを実行

```
./gradlew :app:build
adb install app/build/outputs/apk/app-debug.apk
```

## trial_appの概要
1. 初回起動時はユーザ認証が必要です。認証に成功するとアクセストークンを取得して内部に保存します。
以降は保存したアクセストークンでSPFに接続します。
2. アクセストークンの有効期限が切れた場合は再びユーザ認証が必要となります。認証が成功するとアクセストークンを更新して。内部に保存します。
3. 保存したアクセストークンを削除する事も可能です。削除した場合は再認証が必要となります。
4. マイクアイコンをタップすると音声会話を開始します。
20秒間無言が続くと音声対話は自動的に停止します。
5. キーボードアイコンをタップするとテキストチャットモードになります。
テキスト送信時にSPFに接続、応答が返るとSPFを切断します。
6. NLUのエージェント切り替えに応じて背景色が変わります。
パーソナルエージェントは白、エキスパートエージェントは黄色になります。
7. オプションメニューから以下の操作が可能です  
ユーザーダッシュボードWeb画面の表示  
デベロッパーダッシュボードWeb画面の表示  
アプリケーション情報の表示  
接続設定  
認証情報の初期化
